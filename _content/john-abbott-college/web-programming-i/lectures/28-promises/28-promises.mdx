---
# General Information
category: "Web Programming I"
title: "Promises"
created: "2024-10-29"
number: 28
---

# Intro to Promises

# What is a Promise?

It is the result of an asynchronous operation , a result that we don‚Äôt have yet.

It is a "promise" that you will get a result (eventually)

## Why is this cool?

It allows you to write out what should happen with the result before you have the result and move on

## Why Promises?

We have event listener callbacks tho?

Well promises are a great way to "chain" things. For example: - when async operation A finishes pass on info in a call to B, - when B finishes, pass info and call operation C.

It let's you avoid "callback hell"

## Callback Hell

Which one do you prefer?

```js
// callback hell
call1(function (result, error) {
  if (error) {
    //handle error
  }
  call2(result, function (result2, error2) {
    if (error2) {
      //handle error
    }
    call3(result2, function (result3, error2) {
      if (error3) {
        //handle error
      }
      // do something with result3
    });
  });
});
```

```js
// Promises
call1()
  .then(function (result) {
    return call2();
  })
  .then(function (result2) {
    return call3();
  })
  .then(function (result3) {
    // do something with result3
  });
```

## Chaining benefits

- can group error handling in chained async operations, or specify error handling for subsets
- can wait for multiple async operations to all finish (Promise.all)

# Promise Syntax

```js
let myPromise = new Promise(function (resolve, reject) {
  // Promise content the async code I want to run
});
```

What's happening with the syntax?

- `resolve` üëâ the function to call in the body when successful (go on with any dependent code). You could pass in a value.
- `reject` üëâ the function to call in the body when unsuccessful (do not go on with any dependent code). You could pass in an error.

## When do promises run?

A promise runs ON CREATION. We usually return one in a function (`fetch(url)` returns one):

```js
function myFunction() {
  return new Promise(function (resolve, reject) {
    // Promise content the async code I want to run
    resolve(myResult);
  });
}
```

And this function can be called like:

```js
myFunction();
```

## What about then()?

Alternatively we can call `myFunction` like this:

```js
myFunction()
  .then(function (result) {
    /*do something with the result */
  })
  .catch(function (error) {
    /*do something with the error info */
  });
```

What's happening with the syntax?

- `then` üëâ
- `catch` üëâ

# Exercise 1

Create a function that takes in a parameter. Your function should return a promise: `new Promise( function( resolve, reject ){ })`

- the promise should resolve with ‚Äúyes‚Äù if the number is even.
- if the number is odd, the promise should reject with nothing

In a `then` block you should console log the result.
In a `catch` block you should console log ‚Äúthe number is odd‚Äù.

Call your function with different numbers to test.
