---
# General Information
category: "Web Programming I"
title: "Promises"
created: "2024-10-29"
number: 28
---

# Intro to Promises

In JavaScript, promises are a way to handle asynchronous operations more effectively.

# What in human words is a Promise?

It is a "promise" that you will get a result (eventually)

## Why is this cool?

It allows you to write out what should happen with the result before you have the result and move on

## Why Promises?

We have event listener callbacks tho?

Well promises are a great way to "chain" things. For example:

- when async operation A finishes pass on info in a call to B
- when B finishes, pass info and call operation C

It let's you avoid "callback hell"

## Callback Hell

Which one do you prefer?

```js
// callback hell
call1(function (result, error) {
  if (error) {
    //handle error
  }
  call2(result, function (result2, error2) {
    if (error2) {
      //handle error
    }
    call3(result2, function (result3, error2) {
      if (error3) {
        //handle error
      }
      // do something with result3
    });
  });
});
```

Alternatively, this is what the same logic would look like with promises:

```js
// Promises
call1()
  .then(function (result) {
    return call2();
  })
  .then(function (result2) {
    return call3();
  })
  .then(function (result3) {
    // do something with result3
  });
```

## Chaining benefits

- can group error handling in chained async operations, or specify error handling for subsets
- can wait for multiple async operations to all finish (Promise.all)

## How do Promises work?

A promise is created using the Promise constructor and can be in one of three states:

- _Pending_ 👉 The initial state. The promise is still in progress and hasn't yet completed.
- _Fulfilled_ 👉 The operation completed successfully, and the promise has a result.
- _Rejected_ 👉 The operation failed, and the promise has an error.

# Promise Syntax

```js
let myPromise = new Promise(function (resolve, reject) {
  // Promise content the async code I want to run
});
```

What's happening with the syntax?

- `resolve` 👉 the function to call in the body when successful (go on with any dependent code). You could pass in a value.
- `reject` 👉 the function to call in the body when unsuccessful (do not go on with any dependent code). You could pass in an error.

## When do promises run?

A promise runs ON CREATION and we usually return one in a function:

```js
function myFunction() {
  return new Promise(function (resolve, reject) {
    // Promise content the async code I want to run
    resolve(myResult);
  });
}
```

And this function can be called like:

```js
myFunction();
```

## What about then()?

Alternatively we can call `myFunction` like this:

```js
myFunction()
  .then(function (result) {
    /*do something with the result */
  })
  .catch(function (error) {
    /*do something with the error info */
  });
```

What's happening with the syntax?

- `then` 👉 handles the successful result
- `catch` 👉 handles any error.

# Exercise 1

Create a function that takes in a parameter. Your function should return a promise: `new Promise( function( resolve, reject ){ })`

- the promise should resolve with “yes” if the number is even.
- if the number is odd, the promise should reject with nothing

In a `then` block you should console log the result.
In a `catch` block you should console log “the number is odd”.

Call your function with different numbers to test.
