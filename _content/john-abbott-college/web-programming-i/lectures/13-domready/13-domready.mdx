---
# General Information
category: "Web Programming I"
title: "DOMReady Form Validation"
created: "2024-09-20"
number: 13
---

# event.preventDefault()

You use `event.preventDefault()` in JavaScript to stop the _default_ action that is triggered by an event.

## Why do I need to use this for form submissions?

When you submit a form and when a button with `type="submit"` is clicked, the default behavior is for the browser to reload the page and send the form data to the server. This happens because forms were originally designed for server-side processing and now we are doing things client-side in JavaScript land.

## Why do I need this for submit events?

If you want to handle the form data using JavaScript because you want to create custom error messages and need to prevent the default form submission behavior, _you need to prevent the default form submission behavior_.

This is why `event.preventDefault()` in form submission handlers is necessary.

## What about onSubmit="" ?

The onSubmit event handler in forms can be written in two common ways to prevent the form from submitting and reloading the page:

- Using `event.preventDefault()`
- Returning `false` from the handler

Returning `false` from an `onSubmit` event handler is an _older_ approach to prevent form submission. In HTML, when an event handler returns `false`, it implicitly prevents the default action of the event, just like `event.preventDefault()`.

## Why do I not need this for click events?

When you use an `onclick` event on a button, no default behavior like page reload or data submission is triggered by the browser. Instead, the code inside your `onclick` event runs directly without needing to prevent anything.

To summarize the key differences:

- Form Submission Triggers a Page Reload
- Button Click Doesnâ€™t Trigger a Reload

## Examples

To demonstrate the differences of these concepts. Let's first take a look at how `event.preventDefault()` is used:

```html
<form id="myForm" action="submit-form.php" target="_blank" method="post">
  <div>
    <input type="text" placeholder="Your name" />
    <span id="nope" class="warning">no form submission 4 you</span>
  </div>
  <input type="submit" value="Submit" />
</form>

<script>
  document
    .getElementById("myForm")
    .addEventListener("submit", function (event) {
      event.preventDefault(); /* notice this */
      $("#nope").show();
    });
</script>
```

if you wanted to use an inline event listener, you could do this, but it would be bad form:

```html
<form
  id="myForm"
  action="submit-form.php"
  target="_blank"
  method="post"
  onsubmit="event.preventDefault(); $('#nope').show();"
>
  <div>
    <input type="text" placeholder="Your name" />
    <span id="nope" class="warning">no form submission 4 you</span>
  </div>
  <input type="submit" value="Submit" />
</form>
```

Adopting the old school way of handing `onSubmit`, your code may look like this:

```html
<form
  id="myForm"
  action="submit-form.php"
  target="_blank"
  method="post"
  onsubmit="return handleSubmit()"
>
  <div>
    <input type="text" placeholder="Your name" />
    <span id="nope" class="warning">no form submission 4 you</span>
  </div>

  <input type="submit" value="Submit" />
</form>

<script>
  function handleSubmit() {
    $("#nope").show();
    return false;
  }
</script>
```

and compared to a simple button, we don't need to prevent any default behavior because there is nothing to stop.

```html
<div>
  <button id="myButton">I'm a cool button</button>
  <span id="yup" class="ok">button click 4 u</span>
</div>

<script>
  document.getElementById("myButton").addEventListener("click", function () {
    $("#yup").show();
  });
</script>
```

However we have been mixing vanilla JavaScript AND jQuery. There has to be a better way and this is where we get into the importance of the jQuery `.ready()` function.

# $().ready()

The jQuery `.ready()` function ensures that your code runs only after the DOM is fully loaded and ready to be used.

## How is this state captured in our webpage?

`.ready()` listens for the `DOMContentLoaded` event. This event signals that the HTML document has been completely loaded and parsed, making all DOM elements accessible.

## How does this work?

- Event Listening: When you use `$(document).ready()`, jQuery attaches an event listener to the document. This listener waits for the `DOMContentLoaded` event to fire.
- Code Execution: Once the DOM is ready, any code inside the `.ready()` function is executed. This allows you to safely manipulate DOM elements without running into issues where elements are not yet available.

## How does this relate to form validation?

When working with forms, you often need to validate form data or manipulate elements before a form is submitted. DOM manipulation for validation purposes can be done within the DOMReady event handler, ensuring that all form elements are available for you to work with.

Going back to our original example, let's change it to work with `.ready()`

```html
<form id="myForm" action="submit-form.php" target="_blank" method="post">
  <div>
    <input type="text" placeholder="Your name" />
    <span id="nope" class="warning">no form submission 4 you</span>
  </div>
  <input type="submit" value="Submit" />
</form>

<script>
  // First ensure the DOM is fully loaded.
  $(document).ready(function () {
    // Event listener for form submission
    $("#myForm").on("submit", function (event) {
      // Prevent the default form submission
      event.preventDefault();
      $("#nope").show();
    });
  });
</script>
```

In this example, we wait until the DOM is fully ready using $(document).ready() before adding a submit event listener to the form. The listener prevents the default form submission if the username field is empty and shows an error message.

## Why can't I just have the .on()

You need to wrap your jQuery code in `$(document).ready()` to ensure that the DOM is fully loaded before your JavaScript runs:

- If your script runs before the DOM is fully loaded, it won't find the elements (like `#myForm`) because they haven't been created yet. Without `$(document).ready()`, trying to attach event handlers or perform actions on those elements might fail
- Itâ€™s a common best practice in jQuery to use `$(document).ready()` to prevent potential problems, especially in larger applications where scripts may be placed in different locations. Things might be simpler now, but unpredictable behavior is bad news when working in larger apps.

Think of this as like DOM consent. Only when the DOM is ready, can you access the DOM. The way the DOM communicates it's consent is through the `DOMContentLoaded` event.

However what happens when we want to add event listener to an image instead of a form in a larger project? For this we need a new event.

# Load

The `load` event is important, especially in managing web pages and their resources.

## Why is Load important?

The `load` vent triggers when the entire page, including all dependent resources like images and stylesheets, has finished loading. Attempting to manipulate elements before they are fully loaded can lead to errors, as those elements may not yet be present in the DOM.

## DOMContentLoaded vs Load

The `DOMContentLoaded` and `load` events are both important for handling when content is available in the browser, but they serve different purposes and are triggered at different times.

## Timing is EVERYTHING

`DOMContentLoaded` fires when the DOM is fully constructed, without waiting for stylesheets, images, or other external resources. Itâ€™s ideal for running scripts that need to interact with the DOM but do not depend on other resources. A common use case is for `<form>` submissions.

```js
// Using jQuery
$(document).ready(function () {
  console.log("DOM is ready");
});

// Using pure JS
document.addEventListener("DOMContentLoaded", function () {
  console.log("DOM is ready");
});
```

`load` fires when _everything_ on the page, including all resources like images and stylesheets, is completely loaded. This is important for scripts that manipulate images or _require_ fully loaded styles.

```js
// Using jQuery
$(window).on("load", function () {
  console.log("EVERYTHING is loaded");
});

// Using pure JS
window.addEventListener("load", function () {
  console.log("Everything is fully loaded");
});
```

## When to use what

- `DOMContentLoaded` ðŸ‘‰ Fires when the DOM is ready
- `load` ðŸ‘‰ Fires when _everything_ is fully loaded
