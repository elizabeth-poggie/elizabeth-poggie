---
# General Information
category: "Web Programming I"
title: "Promises Continued"
created: "2024-10-31"
number: 29
---

# Promises

Let's continue what we talked about on tuesday with a more concrete example. What is a promise? It is something that is unknown now and may become sometime in the future.

## From Concept to JavaScript

Poggie "promises" that she will grade your Assignment 2. In JavaScript this would look like:

```js
function poggieMustGrade(assignment) {
  return new Promise(function (resolve, reject) {
    // poggie "promises" to grade your stuff
  });
}
```

Poggie has set a deadline for herself of Wednesday and she made this promise on Tuesday to the class. In JavaScript, this would look like:

```js
function poggieMustGrade(assignment) {
  return new Promise(function (resolve, reject) {
    // Set a deadline (Wednesday)
    const deadline = new Date("2024-10-30");

    // simulate a wait period of 3 seconds instead of 3 days
    setTimeout(() => {
      // Get today's date
      const today = new Date();
      if (today <= deadline) {
        resolve(`Poggie graded your ${assignment.name} on time (wow)`);
      } else {
        reject(
          `Poggie slept thru her deadline and failed to grade your ${assignment.name}`
        );
      }
    }, 3000);
  });
}
```

At the start, the `promise` is pending and then after "3 days", the promise will either be `resolve`d and you will get your feedback, or `reject`ed with no feedback. Consuming these promises would look like this:

```js
poggieMustGrade({
  name: "Assignment 2",
  content: "some really cool code",
});
```

Calling, `then` handling the `promise` once it's been fulfilled would look like this:

```js
poggieMustGrade({
  name: "Assignment 2",
  content: "some really cool code",
})
  .then((message) => {
    console.log(message);
  })
  .catch((error) => {
    console.log(error);
  });
```

Because it's friday, you should expect to see the following output message:

```text
Poggie slept thru her deadline and failed to grade your Assignment 2
```

However, had poggie `resolve`d grading your assignment on time, you would see the following output message:

```text
Poggie graded your Assignment 2 on time (wow)
```

What happens tho if i want to "chain" multiple calls together? For example, once i had finished grading your assignment, you check Lea to see your grade?

## Chaining

Let's create a new method called `checkGrade` that takes a `feedback` object as input and returns a boolean that indicates whether you have read it or not

```js
// example feedback object
const feedback = {
  grade: 0.8,
  comments: ["blah", "blah", "blah"],
};

// example method
function checkGrade(feedback) {
  console.log(`grade: ${feedback.grade}`);
  feedback.comments.forEach((comment) => {
    console.log(`${comment}`);
  });
  return true;
}
```

Let's set the deadline to sunday instead, and modify the resolve statement to return a `feedback` object:

```js
resolve({ grade: 0.8, comments: ["blah", "blah"] });
```

Now let's call the object comme ca:

```js
poggieMustGrade({
  name: "Assignment 2",
  content: "some really cool code",
})
  .then((feedback) => {
    checkGrade(feedback);
  })
  .catch((error) => {
    console.log(error);
  });
```

Why is this so neat? We only trigger the check grade method AFTER the assignment has been properly reviewed. What's cooler? We can keep chaining methods as needed :)

```js
// another method
function sendPoggieDM(res) {
  if (res) {
    console.log("wow the student left me on read");
  }
}

// updated chaining
poggieMustGrade({
  name: "Assignment 2",
  content: "some really cool code",
})
  .then((feedback) => {
    return checkGrade(feedback); // notice the return
  })
  .then((response) => {
    sendPoggieDM(response);
  })
  .catch((error) => {
    console.log(error);
  });
```

# Asynchronous values
